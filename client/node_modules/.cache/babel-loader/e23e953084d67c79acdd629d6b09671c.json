{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/maria/code/childrens-literature/client/src/pages/BookSearch.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport API from '../utils/apiroutes';\nimport Searchbar from '../components/Searchbar/Searchbar';\nimport BookResult from '../components/BookResult/BookResult';\nimport Container from 'react-bootstrap/Container';\nimport CardGroup from 'react-bootstrap/CardGroup';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nexport default function BookSearch() {\n  _s();\n\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n\n  const handleChange = event => {\n    setSearchTerm(event.target.value);\n  };\n\n  const searchFunction = event => {\n    event.preventDefault();\n    var startIndex = 1;\n\n    if (!searchTerm) {\n      console.log(\"no search term\");\n      return;\n    } else API.searchBooks(searchTerm, startIndex).then(results => {\n      console.log(results.data.totalItems);\n      let maxPages = Math.ceil(results.data.totalItems / 40);\n      console.log(maxPages);\n      let searchResults = [];\n      results.data.items.forEach(item => {\n        if (typeof item.volumeInfo.categories !== 'undefined') {\n          if (item.volumeInfo.categories.includes(\"Juvenile Fiction\") || item.volumeInfo.categories.includes(\"Juvenile Nonfiction\")) {\n            console.log(item);\n            searchResults.push(item);\n\n            for (var i = 0; i <= 3; i++) {\n              var newstartIndex = startIndex + 40;\n              API.searchBooks(searchTerm, newstartIndex).then(results => {\n                results.data.items.forEach(item => {\n                  if (typeof item.volumeInfo.categories !== 'undefined') {\n                    if (item.volumeInfo.categories.includes(\"Juvenile Fiction\") || item.volumeInfo.categories.includes(\"Juvenile Nonfiction\")) {\n                      searchResults.push(item);\n                    }\n                  }\n                });\n              });\n              startIndex = newstartIndex;\n              console.log(newstartIndex);\n            }\n          }\n        }\n      });\n      console.log(searchResults);\n      setSearchResults(searchResults);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const renderAuthors = authors => {\n    if (Array.isArray(authors)) {\n      return authors.join(\", \");\n    } else if (!authors) {\n      return \"Unknown\";\n    } else {\n      return authors;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Searchbar, {\n      searchTerm: searchTerm,\n      handleChange: handleChange,\n      searchFunction: searchFunction\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-md-center\",\n      sm: 12,\n      children: searchResults.map(book => {\n        return /*#__PURE__*/_jsxDEV(BookResult, {\n          title: book.volumeInfo.title,\n          authors: book.volumeInfo.authors,\n          author: renderAuthors,\n          image: book.volumeInfo.imageLinks.thumbnail,\n          link: book.volumeInfo.infoLink\n        }, book.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 24\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n\n_s(BookSearch, \"8K28tzN6aqWupSuTIMzTiRsrFxY=\");\n\n_c = BookSearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookSearch\");","map":{"version":3,"sources":["/Users/maria/code/childrens-literature/client/src/pages/BookSearch.js"],"names":["React","useState","useEffect","API","Searchbar","BookResult","Container","CardGroup","Col","Row","BookSearch","searchTerm","setSearchTerm","searchResults","setSearchResults","handleChange","event","target","value","searchFunction","preventDefault","startIndex","console","log","searchBooks","then","results","data","totalItems","maxPages","Math","ceil","items","forEach","item","volumeInfo","categories","includes","push","i","newstartIndex","catch","err","renderAuthors","authors","Array","isArray","join","map","book","title","imageLinks","thumbnail","infoLink","id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport API from '../utils/apiroutes';\nimport Searchbar from '../components/Searchbar/Searchbar'\nimport BookResult from '../components/BookResult/BookResult'\nimport Container from 'react-bootstrap/Container'\nimport CardGroup from 'react-bootstrap/CardGroup'\nimport Col from 'react-bootstrap/Col'\nimport Row from 'react-bootstrap/Row'\n\nexport default function BookSearch() {\n\n    const [searchTerm, setSearchTerm] = useState(\"\");\n    const [searchResults, setSearchResults] = useState([]);\n\n    const handleChange = event => {\n        setSearchTerm(event.target.value)\n    };\n\n\n    const searchFunction = event => {\n        event.preventDefault();\n        var startIndex = 1;\n        if (!searchTerm) {\n            console.log(\"no search term\")\n            return\n        }\n        else API.searchBooks(searchTerm, startIndex)\n        .then (results => {\n            console.log(results.data.totalItems)\n            let maxPages = Math.ceil((results.data.totalItems / 40))\n            console.log(maxPages)\n            let searchResults = [];\n            results.data.items.forEach(item => {\n               if (typeof item.volumeInfo.categories !== 'undefined') {\n                if (item.volumeInfo.categories.includes(\"Juvenile Fiction\") || item.volumeInfo.categories.includes(\"Juvenile Nonfiction\")) {\n                    console.log(item)\n                    searchResults.push(item)\n                    for (var i = 0; i <= 3; i++) {\n                        var newstartIndex = startIndex + 40\n                        API.searchBooks(searchTerm, newstartIndex)\n                        .then (results => {\n                            results.data.items.forEach(item => {\n                                if (typeof item.volumeInfo.categories !== 'undefined') {\n                                    if (item.volumeInfo.categories.includes(\"Juvenile Fiction\") || item.volumeInfo.categories.includes(\"Juvenile Nonfiction\")) {\n                                        searchResults.push(item)}}\n                                        \n                            })\n                        })\n                        startIndex = newstartIndex\n                        console.log(newstartIndex)\n                    }\n                }\n            }    \n           })\n           console.log(searchResults)\n           setSearchResults(searchResults);\n        }).catch(err => {\n            console.log(err)\n        })\n    }\n\n    const renderAuthors = (authors) => {\n        if (Array.isArray(authors)) {\n           return authors.join(\", \")\n        } else if (!authors) {\n            return \"Unknown\"\n        } else {\n            return(authors)\n        }\n    }\n\n    return (\n        <Container>\n             <Searchbar\n             searchTerm= {searchTerm}\n             handleChange= {handleChange} \n             searchFunction= {searchFunction}\n             />\n\n        <Row className=\"justify-content-md-center\" sm={12}>\n\n\n\n            {searchResults.map(book => {\n                return <BookResult\n                key= {book.id}\n                title= {book.volumeInfo.title}\n                authors= {book.volumeInfo.authors}\n                author = {renderAuthors}\n                image= {book.volumeInfo.imageLinks.thumbnail}\n                link= {book.volumeInfo.infoLink}\n                />\n\n            })}\n\n            </Row>\n           \n\n        </Container>\n       \n\n    )\n}"]},"metadata":{},"sourceType":"module"}